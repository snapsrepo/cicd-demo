[{"link_serial":122,"update_time":"2016-06-23T11:13:43.839000+00:00","scrub_version":"48f99abcdf450e7c49a04015355fb699f785e8cbf8288d894686a64c6caeddd1","instance_id":"25b09175-c230-4fe0-a925-7c9097375035","update_user_id":"bkukadia@snaplogic.com","phase_snode_id":null,"class_fqid":"com-snaplogic-pipeline_8","partition_snode_id":"573f1499a415f54562352981","target_runtime":"spark","path_id":"/ConnectFasterInc/BK/BigData","create_time":"2016-06-02T20:08:29.887000+00:00","snode_id":"5750923dfc6c8e30033b7c13","snap_map":{"0dcb3306-0c3b-426f-bc0c-580212d1788f":{"instance_version":1,"class_id":"com-snaplogic-snaps-transform-csvformatter","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-transform-csvformatter_3-snapsmrc330","instance_id":"0dcb3306-0c3b-426f-bc0c-580212d1788f","property_map":{"info":{"label":{"value":"CSV Formatter"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"quoteCharacter":{"value":"\""},"writeHeader":{"value":true},"charset":{"value":"UTF-8"},"ignoreEmptyStream":{"value":false},"delimiter":{"value":","},"useDefinedHeader":{"value":false}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"binary"}}}},"class_version":3,"instance_fqid":"0dcb3306-0c3b-426f-bc0c-580212d1788f_1"},"7b273d88-314f-4e73-bd36-c8b002925543":{"instance_version":1,"class_id":"com-snaplogic-snaps-transform-csvparser","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-transform-csvparser_3-snapsmrc330","instance_id":"7b273d88-314f-4e73-bd36-c8b002925543","property_map":{"info":{"notes":{"value":null},"label":{"value":"CSV Parser"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"binary"}}},"settings":{"escapeChar":{"expression":false,"value":"\\"},"quoteCharacter":{"expression":false,"value":null},"containsHeader":{"value":false},"charset":{"value":"Auto BOM detect"},"skipLines":{"value":0},"delimiter":{"expression":false,"value":"^^^^"},"errorPolicy":{"value":"Both"},"columnList":{"value":[{"columns":{"value":"field001"}}]},"validateHeaders":{"value":false}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":3,"instance_fqid":"7b273d88-314f-4e73-bd36-c8b002925543_1"},"8b367c19-1e72-4adb-8e4d-3e4716e85a88":{"instance_version":1,"class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc330","instance_id":"8b367c19-1e72-4adb-8e4d-3e4716e85a88","property_map":{"info":{"notes":{"value":null},"label":{"value":"Process Datetime data"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":true},"transformations":{"value":{"mappingTable":{"value":[{"targetPath":{"value":"$timestamp_year"},"expression":{"expression":true,"value":"$timestamp_obj.getFullYear()"}},{"targetPath":{"value":"$timestamp_day"},"expression":{"expression":true,"value":"$timestamp_obj.getDate()"}},{"targetPath":{"value":"$timestamp_month"},"expression":{"expression":true,"value":"$timestamp_obj.getMonth()"}},{"targetPath":{"value":"$timestamp_hour"},"expression":{"expression":true,"value":"$timestamp_obj.getHours()"}},{"targetPath":{"value":"$timestamp_min"},"expression":{"expression":true,"value":"$timestamp_obj.getMinutes()"}},{"targetPath":{"value":"$timestamp_sec"},"expression":{"expression":true,"value":"$timestamp_obj.getSeconds()"}},{"targetPath":{"value":"$timestamp_millisec"},"expression":{"expression":true,"value":"$timestamp_obj.getMilliseconds()"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":4,"instance_fqid":"8b367c19-1e72-4adb-8e4d-3e4716e85a88_1"},"13d47eb3-4e05-4329-8e05-a9d5eb8a6ad3":{"instance_version":1,"class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc330","instance_id":"13d47eb3-4e05-4329-8e05-a9d5eb8a6ad3","property_map":{"info":{"notes":{"value":null},"label":{"value":"Parse as JSON Document"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"JSON.parse($field001.replace(\"@timestamp\",\"timestamp_utc\").replace(\"@version\",\"version\"))"},"targetPath":{"value":"$doc"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":4,"instance_fqid":"13d47eb3-4e05-4329-8e05-a9d5eb8a6ad3_1"},"a4345657-1c60-47da-a843-02d912645b77":{"instance_id":"a4345657-1c60-47da-a843-02d912645b77","class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc330","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Map to Hive Schema"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"expression":{"expression":true,"value":"$path"},"targetPath":{"value":"$source_path"}},{"expression":{"expression":true,"value":"$host"},"targetPath":{"value":"$source_host"}},{"expression":{"expression":true,"value":"$clientip"},"targetPath":{"value":"$request_clientip"}},{"expression":{"expression":true,"value":"$ident"},"targetPath":{"value":"$request_ident"}},{"expression":{"expression":true,"value":"$auth"},"targetPath":{"value":"$request_auth"}},{"expression":{"expression":true,"value":"$verb"},"targetPath":{"value":"$http_method"}},{"expression":{"expression":true,"value":"$request"},"targetPath":{"value":"$http_request_url"}},{"expression":{"expression":true,"value":"$httpversion"},"targetPath":{"value":"$http_version"}},{"expression":{"expression":true,"value":"$response"},"targetPath":{"value":"$http_response_code"}},{"expression":{"expression":true,"value":"$bytes"},"targetPath":{"value":"$request_bytes"}},{"expression":{"expression":true,"value":"$referrer"},"targetPath":{"value":"$http_referrer"}},{"expression":{"expression":true,"value":"$agent"},"targetPath":{"value":"$request_agent"}},{"expression":{"expression":true,"value":"$timestamp_utc"},"targetPath":{"value":"$request_timestamp_string"}},{"expression":{"expression":true,"value":"$timestamp_year"},"targetPath":{"value":"$request_timestamp_year"}},{"expression":{"expression":true,"value":"$timestamp_day"},"targetPath":{"value":"$request_timestamp_day"}},{"expression":{"expression":true,"value":"$timestamp_month"},"targetPath":{"value":"$request_timestamp_month"}},{"expression":{"expression":true,"value":"$timestamp_hour"},"targetPath":{"value":"$request_timestamp_hour"}},{"expression":{"expression":true,"value":"$timestamp_min"},"targetPath":{"value":"$request_timestamp_min"}},{"expression":{"expression":true,"value":"$timestamp_sec"},"targetPath":{"value":"$request_timestamp_sec"}},{"expression":{"expression":true,"value":"$timestamp_millisec"},"targetPath":{"value":"$request_timestamp_millisec"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":4,"instance_fqid":"a4345657-1c60-47da-a843-02d912645b77_1"},"55e70e7f-f7e6-4fe1-ac5b-5f0a8c7e6a26":{"instance_id":"55e70e7f-f7e6-4fe1-ac5b-5f0a8c7e6a26","class_id":"com-snaplogic-snaps-transform-datatransform","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-transform-datatransform_4-snapsmrc330","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Extract and Cleanse Data"}},"view_serial":100,"input":{"input0":{"label":{"value":"input0"},"view_type":{"value":"document"}}},"settings":{"nullSafeAccess":{"value":false},"passThrough":{"value":false},"transformations":{"value":{"mappingTable":{"value":[{"targetPath":{"value":"$timestamp_utc"},"expression":{"expression":true,"value":"$doc.timestamp_utc"}},{"targetPath":{"value":"$host"},"expression":{"expression":true,"value":"$doc.host"}},{"targetPath":{"value":"$path"},"expression":{"expression":true,"value":"$doc.path"}},{"targetPath":{"value":"$clientip"},"expression":{"expression":true,"value":"$doc.clientip"}},{"targetPath":{"value":"$ident"},"expression":{"expression":true,"value":"$doc.ident"}},{"targetPath":{"value":"$auth"},"expression":{"expression":true,"value":"$doc.auth"}},{"targetPath":{"value":"$verb"},"expression":{"expression":true,"value":"$doc.verb"}},{"targetPath":{"value":"$response"},"expression":{"expression":true,"value":"$doc.response"}},{"targetPath":{"value":"$request"},"expression":{"expression":true,"value":"$doc.request"}},{"targetPath":{"value":"$referrer"},"expression":{"expression":true,"value":"$doc.referrer.replace(/\\\"/g,\"\")"}},{"targetPath":{"value":"$httpversion"},"expression":{"expression":true,"value":"$doc.httpversion"}},{"targetPath":{"value":"$agent"},"expression":{"expression":true,"value":"$doc.agent.replace(/\\\"/g,\"\")"}},{"targetPath":{"value":"$bytes"},"expression":{"expression":true,"value":"$doc.bytes"}},{"targetPath":{"value":"$timestamp_obj"},"expression":{"expression":true,"value":"Date.parse($doc.timestamp_utc)"}}]},"mappingRoot":{"value":"$"}}}},"error":{"error0":{"label":{"value":"error0"},"view_type":{"value":"document"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"label":{"value":"output0"},"view_type":{"value":"document"}}}},"class_version":4,"instance_fqid":"55e70e7f-f7e6-4fe1-ac5b-5f0a8c7e6a26_1"},"f461fcfe-82df-460e-9b57-257942c1e9ac":{"instance_version":1,"class_id":"com-snaplogic-snaps-hadoop-hdfsread","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-hadoop-hdfsread_1-snapsmrc330","instance_id":"f461fcfe-82df-460e-9b57-257942c1e9ac","property_map":{"info":{"notes":{"value":null},"label":{"value":"HDFS Reader"}},"view_serial":100,"account":{"account_ref":{"value":{"label":{"value":null},"ref_class_id":{"value":"com-snaplogic-snaps-hadoop-binaryazureaccount"},"ref_id":{"value":null}}}},"settings":{"directory":{"expression":false,"value":"hdfs://hdp2.fullsail.snaplogic.com:8020/user/ec2-user/datasets/prasad/click-stream-demo/apachelogs/2016/03/15/23"},"filter":{"value":"*"},"file":{"expression":false,"value":null}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"binary"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"f461fcfe-82df-460e-9b57-257942c1e9ac_1"},"f2350572-cb2d-41dc-8d03-64f4831762be":{"instance_version":1,"class_id":"com-snaplogic-snaps-hadoop-hdfswrite","class_build_tag":"snapsmrc330","class_fqid":"com-snaplogic-snaps-hadoop-hdfswrite_1-snapsmrc330","instance_id":"f2350572-cb2d-41dc-8d03-64f4831762be","property_map":{"info":{"notes":{"value":null},"label":{"value":"HDFS Writer"}},"view_serial":100,"account":{"account_ref":{"value":{"label":{"value":null},"ref_class_id":{"value":"com-snaplogic-snaps-hadoop-binaryazureaccount"},"ref_id":{"value":null}}}},"settings":{"UserPermissionsKey":{"value":[]},"executable_during_suggest":{"value":false},"filter":{"value":"*"},"file":{"expression":false,"value":null},"directory":{"expression":false,"value":"hdfs://hdp2.fullsail.snaplogic.com:8020/user/ec2-user/datasets/prasad/output/clickstream_output3_aggregate_out"},"fileAction":{"value":"OVERWRITE"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"input":{"input0":{"view_type":{"value":"binary"},"label":{"value":"input0"}}}},"class_version":1,"instance_fqid":"f2350572-cb2d-41dc-8d03-64f4831762be_1"}},"org_snode_id":"5592aed995315c0d2e1aaeeb","path":"/ConnectFasterInc/BK/BigData/Process Apache Log data -1- Convert to CSV for Hive","instance_version":4,"migrate_version":"mrc291","scrub_backup":[],"_id":"25b09175-c230-4fe0-a925-7c9097375035","create_user_id":"bkukadia@snaplogic.com","project_snode_id":"576959f964cabf288690d089","property_map":{"info":{"notes":{"value":null},"label":{"value":"Process Apache Log data -1- Convert to CSV for Hive"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"author":{"value":"bkukadia@snaplogic.com"}},"output":{},"settings":{"param_table":{"value":[{"value":{"value":"/2016/03/15/23"},"key":{"value":"folder_to_process"}},{"value":{"value":"/user/ec2-user/datasets/prasad/click-stream-demo/apachelogs"},"key":{"value":"hdfs_ds_root_folder"}},{"value":{"value":"hdfs://hdp2.fullsail.snaplogic.com:8020"},"key":{"value":"hdfs_base_url"}},{"value":{"value":"/user/ec2-user/datasets/prasad/click-stream-demo/apachelogs/hive2"},"key":{"value":"hdfs_ds_output_root_folder"}},{"value":{"value":"/2016/03/15/23"},"key":{"value":"output_folder"}},{"value":{"value":"/request_timestamp_year=2016/request_timestamp_month=03/request_timestamp_day=15/request_timestamp_hour=23"},"key":{"value":"output_folder2"}}]}},"instance_version":2,"error":{"error_behavior":{"value":"none"}},"input":{}},"render_map":{"pan_x_num":0,"default_snaplex":"55957da2fc6c8e0c74a838b2","scale_ratio":1,"detail_map":{"0dcb3306-0c3b-426f-bc0c-580212d1788f":{"grid_x_int":7,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"7b273d88-314f-4e73-bd36-c8b002925543":{"grid_x_int":2,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"8b367c19-1e72-4adb-8e4d-3e4716e85a88":{"grid_x_int":5,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"13d47eb3-4e05-4329-8e05-a9d5eb8a6ad3":{"grid_x_int":3,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"a4345657-1c60-47da-a843-02d912645b77":{"grid_x_int":6,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"55e70e7f-f7e6-4fe1-ac5b-5f0a8c7e6a26":{"grid_x_int":4,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"f461fcfe-82df-460e-9b57-257942c1e9ac":{"grid_x_int":1,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"f2350572-cb2d-41dc-8d03-64f4831762be":{"grid_x_int":8,"error":{},"grid_y_int":3,"rot_tail_int":0,"input":{},"output":{},"rot_int":0}},"pan_y_num":0},"org_id":"5592aed995315c0d2e1aaeeb","class_version":8,"class_id":"com-snaplogic-pipeline","instance_fqid":"25b09175-c230-4fe0-a925-7c9097375035_4","link_map":{"link120":{"src_view_id":"output0","dst_view_id":"input0","src_id":"8b367c19-1e72-4adb-8e4d-3e4716e85a88","dst_id":"a4345657-1c60-47da-a843-02d912645b77"},"link121":{"src_view_id":"output0","dst_view_id":"input0","src_id":"0dcb3306-0c3b-426f-bc0c-580212d1788f","dst_id":"f2350572-cb2d-41dc-8d03-64f4831762be"},"link119":{"src_view_id":"output0","dst_view_id":"input0","src_id":"a4345657-1c60-47da-a843-02d912645b77","dst_id":"0dcb3306-0c3b-426f-bc0c-580212d1788f"},"link118":{"src_view_id":"output0","dst_view_id":"input0","src_id":"55e70e7f-f7e6-4fe1-ac5b-5f0a8c7e6a26","dst_id":"8b367c19-1e72-4adb-8e4d-3e4716e85a88"},"link102":{"src_view_id":"output0","dst_view_id":"input0","src_id":"7b273d88-314f-4e73-bd36-c8b002925543","dst_id":"13d47eb3-4e05-4329-8e05-a9d5eb8a6ad3"},"link100":{"src_view_id":"output0","dst_view_id":"input0","src_id":"f461fcfe-82df-460e-9b57-257942c1e9ac","dst_id":"7b273d88-314f-4e73-bd36-c8b002925543"},"link115":{"src_view_id":"output0","dst_view_id":"input0","src_id":"13d47eb3-4e05-4329-8e05-a9d5eb8a6ad3","dst_id":"55e70e7f-f7e6-4fe1-ac5b-5f0a8c7e6a26"}}}]